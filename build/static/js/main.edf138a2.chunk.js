(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{32:function(e,t,n){e.exports=n(61)},37:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(30),u=n.n(o),i=n(11),l=n(2),c=n(3),s=n(6),m=n(5),p=(n(37),n(15)),h=n.n(p),g=new(function(){function e(){Object(l.a)(this,e),this.auth=h.a.create({baseURL:"http://localhost:4000",withCredentials:!0})}return Object(c.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.email,a=e.password;return this.auth.post("/auth/signup",{username:t,email:n,password:a}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.email,n=e.password;return this.auth.post("/auth/login",{email:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),d=r.a.createContext(),f=d.Consumer,v=d.Provider,b=function(e){return function(t){Object(s.a)(a,t);var n=Object(m.a)(a);function a(){return Object(l.a)(this,a),n.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(f,null,(function(n){var a=n.login,o=n.signup,u=n.user,i=n.logout,l=n.isLoggedin;return r.a.createElement(e,Object.assign({login:a,signup:o,user:u,logout:i,isLoggedin:l},t.props))}))}}]),a}(r.a.Component)},E=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedin:!1,user:null,isLoading:!0},e.signup=function(t){var n=t.username,a=t.email,r=t.password;g.signup({username:n,email:a,password:r}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(t){var n=t.response;return e.setState({message:n.data.statusMessage})}))},e.login=function(t){var n=t.email,a=t.password;g.login({email:n,password:a}).then((function(t){return e.setState({isLoggedin:!0,user:t})})).catch((function(e){return console.log(e)}))},e.logout=function(){g.logout().then((function(){return e.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedin,a=e.user,o=this.login,u=this.logout,i=this.signup;return t?r.a.createElement("div",null,"Loading"):r.a.createElement(v,{value:{isLoggedin:n,user:a,login:o,logout:u,signup:i}},this.props.children)}}]),n}(a.Component),O=b(function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement(i.b,{to:"/",id:"home-btn"},r.a.createElement("h4",null,"Home")))}}]),n}(a.Component)),j=n(1),y=(n(60),n(13)),w=b(function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,r=n.email,o=n.password;e.props.signup({username:a,email:r,password:o})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(y.a)({},a,r))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.password;return r.a.createElement("div",{className:"log-cont"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"text",name:"email",value:n,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),r.a.createElement("p",null,"Already have account?"),r.a.createElement(i.b,{to:"/login"}," Login"))}}]),n}(a.Component)),C=b(function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.email,r=n.password;e.props.login({email:a,password:r})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(y.a)({},a,r))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return r.a.createElement("div",{className:"log-cont"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement(i.b,{to:"/signup"}," Signup"))}}]),n}(a.Component)),S=b(function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",this.props.user.username))}}]),n}(a.Component)),L=n(16);var k=b((function(e){var t=e.component,n=e.isLoggedin,a=Object(L.a)(e,["component","isLoggedin"]);return r.a.createElement(j.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(j.a,{to:"/private"}):r.a.createElement(t,e)}}))}));var _=b((function(e){var t=e.component,n=e.isLoggedin,a=Object(L.a)(e,["component","isLoggedin"]);return r.a.createElement(j.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(j.a,{to:"/login"})}}))})),P=h.a.create({baseURL:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URI:"https://van-life-server.herokuapp.com"}).REACT_APP_API_URL,"/api"),withCredentials:!0}),A=function(e){throw e},N=function(e){return P.post("/upload",e).then((function(e){return e.data})).catch(A)},T=function(e){return P.patch("/update-photo",e).then((function(e){return e.data})).catch(A)},U=b(function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={profilepic:""},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(y.a)({},a,r))},e.handleFileUpload=function(t){console.log("The file to be uploaded is: ",t.target.files[0]);var n=new FormData;n.append("profilepic",t.target.files[0]),N(n).then((function(t){console.log("response is: ",t),e.setState({profilepic:t.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e.handleSubmit=function(t){t.preventDefault(),T(e.state).then((function(e){console.log("added: ",e)})).catch((function(e){console.log("Error while adding the thing: ",e)}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"New Pic"),r.a.createElement("form",{encType:"multipart/form-data",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"file",onChange:function(t){return e.handleFileUpload(t)}}),r.a.createElement("button",{type:"submit"},"Save new thing")))}}]),n}(a.Component)),D=b(function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.logout,a=e.isLoggedin;return r.a.createElement("div",{className:"home-cont"},r.a.createElement("h1",null,"Home Page"),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"navbar-user"},"username: ",t.username),r.a.createElement(U,null),r.a.createElement("button",{className:"navbar-button",onClick:n},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.d,null,r.a.createElement(k,{exact:!0,path:"/signup",component:w}),r.a.createElement(k,{exact:!0,path:"/login",component:C}),r.a.createElement(_,{exact:!0,path:"/private",component:S}))))}}]),n}(a.Component)),F=function(e){Object(s.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(E,null,r.a.createElement(O,null),r.a.createElement("div",{className:"container"},r.a.createElement(D,null)))}}]),n}(a.Component);u.a.render(r.a.createElement(i.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.edf138a2.chunk.js.map